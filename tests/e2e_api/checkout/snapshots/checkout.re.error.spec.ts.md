# Snapshot report for `tests/e2e_api/checkout/checkout.re.error.spec.ts`

The actual snapshot is saved in `checkout.re.error.spec.ts.snap`.

Generated by [AVA](https://ava.li).

## POST / cannot recheckout with COD using voucher for CC

> Snapshot 1

    {
      code: 400,
      error: {},
      message: 'REQUIRES_CC_PAYMENT',
    }

## POST / cannot recheckout with already used voucher

> Snapshot 1

    {
      code: 400,
      error: {},
      message: 'YOU_ALREADY_USED_THIS_VOUCHER',
    }

## POST / cannot recheckout with empty cart

> Snapshot 1

    {
      code: 400,
      data: {
        cart: [],
      },
      message: [
        'PLEASE_SELECT_A_PAYMENT_METHOD',
        'THERE_ARE_NO_ITEMS_IN_YOUR_ORDER',
      ],
    }

## POST / cannot recheckout with empty data

> Snapshot 1

    `TypeError: Cannot destructure property `billing` of &#39;undefined&#39; or &#39;null&#39;.<br> &nbsp; &nbsp;at exports.validateRequiredData (/app/api/checkout/checkout.middleware.js:38:44)<br> &nbsp; &nbsp;at WebFrameworkShim.applySegment (/app/node_modules/newrelic/lib/shim/shim.js:1387:20)<br> &nbsp; &nbsp;at _applyRecorderSegment (/app/node_modules/newrelic/lib/shim/shim.js:978:20)<br> &nbsp; &nbsp;at _doRecord (/app/node_modules/newrelic/lib/shim/shim.js:957:17)<br> &nbsp; &nbsp;at /app/node_modules/newrelic/lib/shim/shim.js:928:24<br> &nbsp; &nbsp;at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:82:5)<br> &nbsp; &nbsp;at next (/app/node_modules/express/lib/router/route.js:100:13)<br> &nbsp; &nbsp;at boundNext (/app/node_modules/newrelic/lib/shim/webframework-shim.js:999:30)<br> &nbsp; &nbsp;at WebFrameworkShim.applySegment (/app/node_modules/newrelic/lib/shim/shim.js:1387:20)<br> &nbsp; &nbsp;at wrapper (/app/node_modules/newrelic/lib/shim/shim.js:2022:17)<br> &nbsp; &nbsp;at Object.&lt;anonymous&gt; (/app/api/checkout/checkout.middleware.js:475:12)<br> &nbsp; &nbsp;at Generator.next (&lt;anonymous&gt;)<br> &nbsp; &nbsp;at fulfilled (/app/api/checkout/checkout.middleware.js:4:58)<br> &nbsp; &nbsp;at &lt;anonymous&gt;<br> &nbsp; &nbsp;at process._tickDomainCallback (internal/process/next_tick.js:228:7)<br> &nbsp; &nbsp;at process.wrappedProcess (/app/node_modules/newrelic/lib/instrumentation/core/timers.js:15:21)␊
    `

## POST / cannot recheckout with expired voucher

> Snapshot 1

    {
      code: 400,
      error: {},
      message: 'VOUCHER_OR_NOT_VALID',
    }

## POST / cannot recheckout with invalid cookie

> Snapshot 1

    `TypeError: Cannot read property &#39;substr&#39; of undefined<br> &nbsp; &nbsp;at Function.isValidEmail (/app/api/account/account.repository.js:348:34)<br> &nbsp; &nbsp;at exports.validateRequiredData (/app/api/checkout/checkout.middleware.js:44:55)<br> &nbsp; &nbsp;at WebFrameworkShim.applySegment (/app/node_modules/newrelic/lib/shim/shim.js:1387:20)<br> &nbsp; &nbsp;at _applyRecorderSegment (/app/node_modules/newrelic/lib/shim/shim.js:978:20)<br> &nbsp; &nbsp;at _doRecord (/app/node_modules/newrelic/lib/shim/shim.js:957:17)<br> &nbsp; &nbsp;at /app/node_modules/newrelic/lib/shim/shim.js:928:24<br> &nbsp; &nbsp;at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:82:5)<br> &nbsp; &nbsp;at next (/app/node_modules/express/lib/router/route.js:100:13)<br> &nbsp; &nbsp;at boundNext (/app/node_modules/newrelic/lib/shim/webframework-shim.js:999:30)<br> &nbsp; &nbsp;at WebFrameworkShim.applySegment (/app/node_modules/newrelic/lib/shim/shim.js:1387:20)<br> &nbsp; &nbsp;at wrapper (/app/node_modules/newrelic/lib/shim/shim.js:2022:17)<br> &nbsp; &nbsp;at Object.&lt;anonymous&gt; (/app/api/checkout/checkout.middleware.js:475:12)<br> &nbsp; &nbsp;at Generator.next (&lt;anonymous&gt;)<br> &nbsp; &nbsp;at fulfilled (/app/api/checkout/checkout.middleware.js:4:58)<br> &nbsp; &nbsp;at &lt;anonymous&gt;<br> &nbsp; &nbsp;at process._tickDomainCallback (internal/process/next_tick.js:228:7)<br> &nbsp; &nbsp;at process.wrappedProcess (/app/node_modules/newrelic/lib/instrumentation/core/timers.js:15:21)␊
    `

## POST / cannot recheckout with invalid phone and tax code

> Snapshot 1

    {
      code: 400,
      data: null,
      message: [
        'BILLING_ADDRESS_REQUIRED',
        'SHIPPING_ADDRESS_REQUIRED',
        'INVALID_BILLING_TAX_CODE',
        'BILLING_PHONE_NUMBER_IS_NOT_VALID',
        'SHIPPING_PHONE_NUMBER_IS_NOT_VALID',
        'PLEASE_SELECT_A_PAYMENT_METHOD',
      ],
    }

## POST / cannot recheckout with sale ended product (skip-prod)

> Snapshot 1

    {
      code: 400,
      data: {
        cart: [],
      },
      message: [
        {
          message: 'THE_SALE_FOR_TITLE_HAS_ENDED',
          values: {
            title: 'James McCabe-Đồng Hồ Nam Automatic Assembled Dây Vân Đen',
          },
        },
      ],
    }

## POST / cannot recheckout with sold out product (skip-prod)

> Snapshot 1

    {
      code: 400,
      data: {
        cart: [],
      },
      message: [
        {
          message: 'TITLE_IS_OUT_OF_STOCK',
          values: {
            title: 'James McCabe-Đồng Hồ Nam Automatic Assembled Dây Vân Đen',
          },
        },
      ],
    }

## POST / cannot recheckout with voucher exceeding number of usage

> Snapshot 1

    {
      code: 400,
      error: {},
      message: 'EXCEED_TIME_OF_USAGE',
    }

## POST / cannot recheckout with voucher for Stripe using wrong bin range (skip-prod)

> Snapshot 1

    {
      code: 400,
      error: {},
      message: 'THIS_CC_NOT_ACCEPTABLE',
    }

## POST / cannot recheckout with voucher not applied for today

> Snapshot 1

    {
      code: 400,
      data: {
        voucher: {
          specificDays: [
            2,
          ],
        },
      },
      message: 'VOUCHER_NOT_APPLY_FOR_TODAY',
    }

## POST / cannot recheckout with voucher not meeting min items

> Snapshot 1

    {
      code: 400,
      data: {
        voucher: {
          numberOfItems: 3,
        },
      },
      message: 'NOT_MEET_MINIMUM_ITEMS',
    }

## POST / cannot recheckout with voucher only used for other customer

> Snapshot 1

    {
      code: 400,
      error: {},
      message: 'NOT_ALLOWED_TO_USE_VOUCHER',
    }

## POST / cannot recheckout with with more than available credit

> Snapshot 1

    {
      code: 400,
      data: {
        accountCredit: 0,
      },
      message: 'USER_SPEND_MORE_CREDIT_THAN_THEY_HAVE',
    }

## POST / cannot recheckout without address

> Snapshot 1

    {
      code: 400,
      data: {
        cart: [],
      },
      message: [
        'BILLING_ADDRESS_REQUIRED',
        'SHIPPING_ADDRESS_REQUIRED',
        'PLEASE_SELECT_A_PAYMENT_METHOD',
        'THERE_ARE_NO_ITEMS_IN_YOUR_ORDER',
      ],
    }

## POST / cannot recheckout without payment method

> Snapshot 1

    {
      code: 400,
      data: null,
      message: [
        'PLEASE_SELECT_A_PAYMENT_METHOD',
      ],
    }
