# Snapshot report for `tests/e2e_api/checkout/checkout.error.spec.ts`

The actual snapshot is saved in `checkout.error.spec.ts.snap`.

Generated by [AVA](https://ava.li).

## Get 400 error code when checkout with voucher for expired secret campaign

> Snapshot 1

    {
      code: 400,
      error: {},
      message: 'VOUCHER_OR_NOT_VALID',
    }

## Get 400 error code when checkout with COD using voucher for CC

> Snapshot 1

    {
      code: 400,
      error: {},
      message: 'REQUIRES_CC_PAYMENT',
    }

## Get 400 error code when checkout with already used voucher (skip-prod)

> Snapshot 1

    {
      code: 400,
      error: {},
      message: 'YOU_ALREADY_USED_THIS_VOUCHER',
    }

## Get 400 error code when checkout with empty cart

> Snapshot 1

    {
      code: 400,
      data: {
        cart: [],
      },
      message: [
        'PLEASE_SELECT_A_PAYMENT_METHOD',
        'THERE_ARE_NO_ITEMS_IN_YOUR_ORDER',
      ],
    }

## Get 400 error code when checkout with expired voucher

> Snapshot 1

    {
      code: 400,
      error: {},
      message: 'VOUCHER_OR_NOT_VALID',
    }

## Get 400 error code when checkout with invalid phone and tax code

> Snapshot 1

    {
      code: 400,
      data: null,
      message: [
        'BILLING_ADDRESS_REQUIRED',
        'SHIPPING_ADDRESS_REQUIRED',
        'INVALID_BILLING_TAX_CODE',
        'BILLING_PHONE_NUMBER_IS_NOT_VALID',
        'SHIPPING_PHONE_NUMBER_IS_NOT_VALID',
        'PLEASE_SELECT_A_PAYMENT_METHOD',
      ],
    }

## Get 400 error code when checkout with more than 1 voucher in a campaign (skip-prod)

> Snapshot 1

    {
      code: 400,
      error: {},
      message: 'VOUCHER_PER_CAMPAIGN',
    }

## Get 400 error code when checkout with more than 8 unique products

> Snapshot 1

    {
      code: 400,
      message: 'CART_EXCEEDS_THE_MAXIMUM_SIZE',
      values: {
        quantity: 8,
      },
    }

## Get 400 error code when checkout with more than available credit

> Snapshot 1

    {
      code: 400,
      data: {
        accountCredit: 0,
      },
      message: 'USER_SPEND_MORE_CREDIT_THAN_THEY_HAVE',
    }

## Get 400 error code when checkout with redeemed voucher

> Snapshot 1

    {
      code: 400,
      error: {},
      message: 'VOUCHER_OR_NOT_VALID',
    }

## Get 400 error code when checkout with voucher exceeding number of usage (skip-prod)

> Snapshot 1

    {
      code: 400,
      error: {},
      message: 'EXCEED_TIME_OF_USAGE',
    }

## Get 400 error code when checkout with voucher for Stripe using wrong bin range (skip-prod)

> Snapshot 1

    {
      code: 400,
      error: {},
      message: 'THIS_CC_NOT_ACCEPTABLE',
    }

## Get 400 error code when checkout with voucher not applied for today

> Snapshot 1

    {
      code: 400,
      data: {
        voucher: {
          specificDays: [
            3,
          ],
        },
      },
      message: 'VOUCHER_NOT_APPLY_FOR_TODAY',
    }

## Get 400 error code when checkout with voucher not meeting min items

> Snapshot 1

    {
      code: 400,
      data: {
        voucher: {
          numberOfItems: 2,
        },
      },
      message: 'NOT_MEET_MINIMUM_ITEMS',
    }

## Get 400 error code when checkout with voucher not meeting min purchase

> Snapshot 1

    {
      code: 400,
      error: {},
      message: 'TOTAL_VALUE_LESS_THAN_VOUCHER_MINIMUM',
    }

## Get 400 error code when checkout with voucher only used for other customer

> Snapshot 1

    {
      code: 400,
      error: {},
      message: 'NOT_ALLOWED_TO_USE_VOUCHER',
    }

## Get 400 error code when checkout with voucher used by another customer

> Snapshot 1

    {
      code: 400,
      error: {},
      message: 'VOUCHER_ALREADY_USED',
    }

## Get 400 error code when checkout without address

> Snapshot 1

    {
      code: 400,
      data: {
        cart: [],
      },
      message: [
        'BILLING_ADDRESS_REQUIRED',
        'SHIPPING_ADDRESS_REQUIRED',
        'PLEASE_SELECT_A_PAYMENT_METHOD',
        'THERE_ARE_NO_ITEMS_IN_YOUR_ORDER',
      ],
    }

## Get 400 error code when checkout without payment method

> Snapshot 1

    {
      code: 400,
      data: null,
      message: [
        'PLEASE_SELECT_A_PAYMENT_METHOD',
      ],
    }

## Get 500 error code when checkout with empty data

> Snapshot 1

    `TypeError: Cannot destructure property `billing` of &#39;undefined&#39; or &#39;null&#39;.<br> &nbsp; &nbsp;at exports.validateRequiredData (/app/api/checkout/checkout.middleware.js:39:44)<br> &nbsp; &nbsp;at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:82:5)<br> &nbsp; &nbsp;at next (/app/node_modules/express/lib/router/route.js:100:13)<br> &nbsp; &nbsp;at exports.identifyVisitor (/app/api/account/account.middleware.js:14:5)<br> &nbsp; &nbsp;at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:82:5)<br> &nbsp; &nbsp;at next (/app/node_modules/express/lib/router/route.js:100:13)<br> &nbsp; &nbsp;at Route.dispatch (/app/node_modules/express/lib/router/route.js:81:3)<br> &nbsp; &nbsp;at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:82:5)<br> &nbsp; &nbsp;at /app/node_modules/express/lib/router/index.js:233:24<br> &nbsp; &nbsp;at Function.proto.process_params (/app/node_modules/express/lib/router/index.js:311:12)<br> &nbsp; &nbsp;at /app/node_modules/express/lib/router/index.js:227:12<br> &nbsp; &nbsp;at Function.match_layer (/app/node_modules/express/lib/router/index.js:294:3)<br> &nbsp; &nbsp;at next (/app/node_modules/express/lib/router/index.js:188:10)<br> &nbsp; &nbsp;at /app/node_modules/express/lib/router/index.js:213:18<br> &nbsp; &nbsp;at Function.match_layer (/app/node_modules/express/lib/router/index.js:294:3)<br> &nbsp; &nbsp;at next (/app/node_modules/express/lib/router/index.js:188:10)<br> &nbsp; &nbsp;at Function.proto.handle (/app/node_modules/express/lib/router/index.js:163:3)<br> &nbsp; &nbsp;at router (/app/node_modules/express/lib/router/index.js:34:12)<br> &nbsp; &nbsp;at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:82:5)<br> &nbsp; &nbsp;at trim_prefix (/app/node_modules/express/lib/router/index.js:269:13)<br> &nbsp; &nbsp;at /app/node_modules/express/lib/router/index.js:236:9<br> &nbsp; &nbsp;at Function.proto.process_params (/app/node_modules/express/lib/router/index.js:311:12)<br> &nbsp; &nbsp;at /app/node_modules/express/lib/router/index.js:227:12<br> &nbsp; &nbsp;at Function.match_layer (/app/node_modules/express/lib/router/index.js:294:3)<br> &nbsp; &nbsp;at next (/app/node_modules/express/lib/router/index.js:188:10)<br> &nbsp; &nbsp;at /app/node_modules/express/lib/router/index.js:190:16<br> &nbsp; &nbsp;at Function.match_layer (/app/node_modules/express/lib/router/index.js:294:3)<br> &nbsp; &nbsp;at next (/app/node_modules/express/lib/router/index.js:188:10)<br> &nbsp; &nbsp;at /app/node_modules/express/lib/router/index.js:190:16<br> &nbsp; &nbsp;at Function.match_layer (/app/node_modules/express/lib/router/index.js:294:3)<br> &nbsp; &nbsp;at next (/app/node_modules/express/lib/router/index.js:188:10)<br> &nbsp; &nbsp;at /app/node_modules/express/lib/router/index.js:190:16<br> &nbsp; &nbsp;at Function.match_layer (/app/node_modules/express/lib/router/index.js:294:3)<br> &nbsp; &nbsp;at next (/app/node_modules/express/lib/router/index.js:188:10)<br> &nbsp; &nbsp;at /app/node_modules/express/lib/router/index.js:190:16<br> &nbsp; &nbsp;at Function.match_layer (/app/node_modules/express/lib/router/index.js:294:3)<br> &nbsp; &nbsp;at next (/app/node_modules/express/lib/router/index.js:188:10)<br> &nbsp; &nbsp;at Function.proto.handle (/app/node_modules/express/lib/router/index.js:163:3)<br> &nbsp; &nbsp;at router (/app/node_modules/express/lib/router/index.js:34:12)<br> &nbsp; &nbsp;at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:82:5)<br> &nbsp; &nbsp;at trim_prefix (/app/node_modules/express/lib/router/index.js:269:13)<br> &nbsp; &nbsp;at /app/node_modules/express/lib/router/index.js:236:9<br> &nbsp; &nbsp;at Function.proto.process_params (/app/node_modules/express/lib/router/index.js:311:12)<br> &nbsp; &nbsp;at /app/node_modules/express/lib/router/index.js:227:12<br> &nbsp; &nbsp;at Function.match_layer (/app/node_modules/express/lib/router/index.js:294:3)<br> &nbsp; &nbsp;at next (/app/node_modules/express/lib/router/index.js:188:10)<br> &nbsp; &nbsp;at app.use (/app/api/index.js:124:9)<br> &nbsp; &nbsp;at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:82:5)<br> &nbsp; &nbsp;at trim_prefix (/app/node_modules/express/lib/router/index.js:269:13)<br> &nbsp; &nbsp;at /app/node_modules/express/lib/router/index.js:236:9<br> &nbsp; &nbsp;at Function.proto.process_params (/app/node_modules/express/lib/router/index.js:311:12)<br> &nbsp; &nbsp;at /app/node_modules/express/lib/router/index.js:227:12<br> &nbsp; &nbsp;at Function.match_layer (/app/node_modules/express/lib/router/index.js:294:3)<br> &nbsp; &nbsp;at next (/app/node_modules/express/lib/router/index.js:188:10)<br> &nbsp; &nbsp;at /app/node_modules/body-parser/lib/read.js:107:5<br> &nbsp; &nbsp;at IncomingMessage.onEnd (/app/node_modules/body-parser/node_modules/raw-body/index.js:136:7)<br> &nbsp; &nbsp;at Object.onceWrapper (events.js:312:30)<br> &nbsp; &nbsp;at emitNone (events.js:105:13)<br> &nbsp; &nbsp;at IncomingMessage.emit (events.js:207:7)<br> &nbsp; &nbsp;at endReadableNT (_stream_readable.js:1056:12)<br> &nbsp; &nbsp;at _combinedTickCallback (internal/process/next_tick.js:138:11)<br> &nbsp; &nbsp;at process._tickDomainCallback (internal/process/next_tick.js:218:9)␊
    `

## Get 500 error code when checkout with invalid cookie

> Snapshot 1

    `TypeError: Cannot read property &#39;substr&#39; of undefined<br> &nbsp; &nbsp;at Function.isValidEmail (/app/api/account/account.repository.js:404:34)<br> &nbsp; &nbsp;at exports.validateRequiredData (/app/api/checkout/checkout.middleware.js:45:55)<br> &nbsp; &nbsp;at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:82:5)<br> &nbsp; &nbsp;at next (/app/node_modules/express/lib/router/route.js:100:13)<br> &nbsp; &nbsp;at exports.identifyVisitor (/app/api/account/account.middleware.js:14:5)<br> &nbsp; &nbsp;at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:82:5)<br> &nbsp; &nbsp;at next (/app/node_modules/express/lib/router/route.js:100:13)<br> &nbsp; &nbsp;at Route.dispatch (/app/node_modules/express/lib/router/route.js:81:3)<br> &nbsp; &nbsp;at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:82:5)<br> &nbsp; &nbsp;at /app/node_modules/express/lib/router/index.js:233:24<br> &nbsp; &nbsp;at Function.proto.process_params (/app/node_modules/express/lib/router/index.js:311:12)<br> &nbsp; &nbsp;at /app/node_modules/express/lib/router/index.js:227:12<br> &nbsp; &nbsp;at Function.match_layer (/app/node_modules/express/lib/router/index.js:294:3)<br> &nbsp; &nbsp;at next (/app/node_modules/express/lib/router/index.js:188:10)<br> &nbsp; &nbsp;at /app/node_modules/express/lib/router/index.js:213:18<br> &nbsp; &nbsp;at Function.match_layer (/app/node_modules/express/lib/router/index.js:294:3)<br> &nbsp; &nbsp;at next (/app/node_modules/express/lib/router/index.js:188:10)<br> &nbsp; &nbsp;at Function.proto.handle (/app/node_modules/express/lib/router/index.js:163:3)<br> &nbsp; &nbsp;at router (/app/node_modules/express/lib/router/index.js:34:12)<br> &nbsp; &nbsp;at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:82:5)<br> &nbsp; &nbsp;at trim_prefix (/app/node_modules/express/lib/router/index.js:269:13)<br> &nbsp; &nbsp;at /app/node_modules/express/lib/router/index.js:236:9<br> &nbsp; &nbsp;at Function.proto.process_params (/app/node_modules/express/lib/router/index.js:311:12)<br> &nbsp; &nbsp;at /app/node_modules/express/lib/router/index.js:227:12<br> &nbsp; &nbsp;at Function.match_layer (/app/node_modules/express/lib/router/index.js:294:3)<br> &nbsp; &nbsp;at next (/app/node_modules/express/lib/router/index.js:188:10)<br> &nbsp; &nbsp;at /app/node_modules/express/lib/router/index.js:190:16<br> &nbsp; &nbsp;at Function.match_layer (/app/node_modules/express/lib/router/index.js:294:3)<br> &nbsp; &nbsp;at next (/app/node_modules/express/lib/router/index.js:188:10)<br> &nbsp; &nbsp;at /app/node_modules/express/lib/router/index.js:190:16<br> &nbsp; &nbsp;at Function.match_layer (/app/node_modules/express/lib/router/index.js:294:3)<br> &nbsp; &nbsp;at next (/app/node_modules/express/lib/router/index.js:188:10)<br> &nbsp; &nbsp;at /app/node_modules/express/lib/router/index.js:190:16<br> &nbsp; &nbsp;at Function.match_layer (/app/node_modules/express/lib/router/index.js:294:3)<br> &nbsp; &nbsp;at next (/app/node_modules/express/lib/router/index.js:188:10)<br> &nbsp; &nbsp;at /app/node_modules/express/lib/router/index.js:190:16<br> &nbsp; &nbsp;at Function.match_layer (/app/node_modules/express/lib/router/index.js:294:3)<br> &nbsp; &nbsp;at next (/app/node_modules/express/lib/router/index.js:188:10)<br> &nbsp; &nbsp;at Function.proto.handle (/app/node_modules/express/lib/router/index.js:163:3)<br> &nbsp; &nbsp;at router (/app/node_modules/express/lib/router/index.js:34:12)<br> &nbsp; &nbsp;at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:82:5)<br> &nbsp; &nbsp;at trim_prefix (/app/node_modules/express/lib/router/index.js:269:13)<br> &nbsp; &nbsp;at /app/node_modules/express/lib/router/index.js:236:9<br> &nbsp; &nbsp;at Function.proto.process_params (/app/node_modules/express/lib/router/index.js:311:12)<br> &nbsp; &nbsp;at /app/node_modules/express/lib/router/index.js:227:12<br> &nbsp; &nbsp;at Function.match_layer (/app/node_modules/express/lib/router/index.js:294:3)<br> &nbsp; &nbsp;at next (/app/node_modules/express/lib/router/index.js:188:10)<br> &nbsp; &nbsp;at app.use (/app/api/index.js:124:9)<br> &nbsp; &nbsp;at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:82:5)<br> &nbsp; &nbsp;at trim_prefix (/app/node_modules/express/lib/router/index.js:269:13)<br> &nbsp; &nbsp;at /app/node_modules/express/lib/router/index.js:236:9<br> &nbsp; &nbsp;at Function.proto.process_params (/app/node_modules/express/lib/router/index.js:311:12)<br> &nbsp; &nbsp;at /app/node_modules/express/lib/router/index.js:227:12<br> &nbsp; &nbsp;at Function.match_layer (/app/node_modules/express/lib/router/index.js:294:3)<br> &nbsp; &nbsp;at next (/app/node_modules/express/lib/router/index.js:188:10)<br> &nbsp; &nbsp;at /app/node_modules/body-parser/lib/read.js:107:5<br> &nbsp; &nbsp;at IncomingMessage.onEnd (/app/node_modules/body-parser/node_modules/raw-body/index.js:136:7)<br> &nbsp; &nbsp;at Object.onceWrapper (events.js:312:30)<br> &nbsp; &nbsp;at emitNone (events.js:105:13)<br> &nbsp; &nbsp;at IncomingMessage.emit (events.js:207:7)<br> &nbsp; &nbsp;at endReadableNT (_stream_readable.js:1056:12)<br> &nbsp; &nbsp;at _combinedTickCallback (internal/process/next_tick.js:138:11)<br> &nbsp; &nbsp;at process._tickDomainCallback (internal/process/next_tick.js:218:9)␊
    `
