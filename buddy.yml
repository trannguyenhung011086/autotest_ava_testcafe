- pipeline: "E2E API Test on Staging"
  trigger_mode: "ON_EVERY_PUSH"
  ref_name: "refs/heads/*"
  folder: "E2E Test on Testing"
  ref_type: "WILDCARD"
  target_site_url: "https://www.staging.leflair.io"
  trigger_condition: "ALWAYS"
  trigger_condition_paths:
  - "/tests/e2e_api"
  actions:
  - action: "Check https://www.staging.leflair.io/api/v2/home status"
    type: "WEB"
    headers:
    - name: "User-Agent"
      value: "Buddy"
    - name: "Content-Type"
      value: "application/json"
    text: "featured"
    text_existence: true
    destination: "https://www.staging.leflair.io/api/v2/home"
    trigger_condition: "ALWAYS"
  - action: "NODE_ENV=staging | test_api"
    type: "BUILD"
    working_directory: "/buddy/leflair-auto-test"
    docker_image_name: "library/node"
    docker_image_tag: "latest"
    execute_commands:
    - "# yarn install"
    - "npm install"
    - "NODE_ENV=staging npm run test_api -- --ci --reporters=default --reporters=jest-junit"
    mount_filesystem_path: "/buddy/leflair-auto-test"
    shell: "BASH"
    trigger_condition: "ALWAYS"
  - action: "Send notification to Telegram"
    type: "TELEGRAM"
    trigger_time: "ON_FAILURE"
    content: "[#$BUDDY_EXECUTION_ID] $BUDDY_PIPELINE_NAME failed execution by [$BUDDY_INVOKER_NAME]($BUDDY_INVOKER_URL)"
    parse_mode: "MARKDOWN"
    trigger_condition: "ALWAYS"
    integration_id: 40663
- pipeline: "E2E Chrome Test on Staging"
  trigger_mode: "ON_EVERY_PUSH"
  ref_name: "refs/heads/*"
  folder: "E2E Test on Testing"
  ref_type: "WILDCARD"
  target_site_url: "https://www.staging.leflair.io"
  trigger_condition: "ALWAYS"
  trigger_condition_paths:
  - "/tests/e2e_ui/desktop"
  actions:
  - action: "Check https://www.staging.leflair.io status"
    type: "WEB"
    headers:
    - name: "User-Agent"
      value: "Buddy"
    - name: "Content-Type"
      value: "application/json"
    text: "leflair"
    text_existence: true
    destination: "https://www.staging.leflair.io"
    trigger_condition: "ALWAYS"
  - action: "NODE_ENV=staging | test_ui_chrome"
    type: "BUILD"
    working_directory: "/buddy/leflair-auto-test"
    docker_image_name: "library/node"
    docker_image_tag: "latest"
    execute_commands:
    - "# yarn install"
    - "npm install"
    - "NODE_ENV=staging SELENIUM_REMOTE_URL=http://selenium-ch:4444/wd/hub npm run test_ui_chrome -- --ci --reporters=default --reporters=jest-junit"
    services:
    - type: "SELENIUM_CHROME"
      version: "latest"
      persistent: false
      connection:
        host: "selenium-ch"
        port: 4444
      plugins: []
      accounts: []
    mount_filesystem_path: "/buddy/leflair-auto-test"
    shell: "BASH"
    trigger_condition: "ALWAYS"
  - action: "Send notification to Telegram"
    type: "TELEGRAM"
    trigger_time: "ON_FAILURE"
    content: "[#$BUDDY_EXECUTION_ID] $BUDDY_PIPELINE_NAME failed execution by [$BUDDY_INVOKER_NAME]($BUDDY_INVOKER_URL)"
    parse_mode: "MARKDOWN"
    trigger_condition: "ALWAYS"
    integration_id: 40663
- pipeline: "E2E Firefox Test on Staging"
  trigger_mode: "ON_EVERY_PUSH"
  ref_name: "refs/heads/*"
  folder: "E2E Test on Testing"
  ref_type: "WILDCARD"
  target_site_url: "https://www.staging.leflair.io"
  trigger_condition: "ALWAYS"
  trigger_condition_paths:
  - "/tests/e2e_ui/desktop"
  actions:
  - action: "Check https://www.staging.leflair.io status"
    type: "WEB"
    headers:
    - name: "Content-Type"
      value: "application/json"
    - name: "User-Agent"
      value: "Buddy"
    text: "leflair"
    text_existence: true
    destination: "https://www.staging.leflair.io"
    trigger_condition: "ALWAYS"
  - action: "NODE_ENV=staging | test_ui_firefox"
    type: "BUILD"
    working_directory: "/buddy/leflair-auto-test"
    docker_image_name: "library/node"
    docker_image_tag: "latest"
    execute_commands:
    - "# yarn install"
    - "npm install"
    - "NODE_ENV=staging SELENIUM_REMOTE_URL=http://selenium-ff:4444/wd/hub npm run test_ui_firefox -- --ci --reporters=default --reporters=jest-junit"
    services:
    - type: "SELENIUM_FIREFOX"
      version: "latest"
      persistent: false
      connection:
        host: "selenium-ff"
        port: 4444
      plugins: []
      accounts: []
    mount_filesystem_path: "/buddy/leflair-auto-test"
    shell: "BASH"
    trigger_condition: "ALWAYS"
  - action: "Send notification to Telegram"
    type: "TELEGRAM"
    trigger_time: "ON_FAILURE"
    content: "[#$BUDDY_EXECUTION_ID] $BUDDY_PIPELINE_NAME failed execution by [$BUDDY_INVOKER_NAME]($BUDDY_INVOKER_URL)"
    parse_mode: "MARKDOWN"
    trigger_condition: "ALWAYS"
    integration_id: 40663
- pipeline: "E2E Mobile Test on Staging"
  trigger_mode: "ON_EVERY_PUSH"
  ref_name: "refs/heads/*"
  folder: "E2E Test on Testing"
  ref_type: "WILDCARD"
  target_site_url: "https://www.staging.leflair.io"
  trigger_condition: "ALWAYS"
  trigger_condition_paths:
  - "/tests/e2e_ui/mobile"
  actions:
  - action: "Check https://www.staging.leflair.io status"
    type: "WEB"
    headers:
    - name: "Content-Type"
      value: "application/json"
    - name: "User-Agent"
      value: "Buddy"
    text: "leflair"
    text_existence: true
    destination: "https://www.staging.leflair.io"
    trigger_condition: "ALWAYS"
  - action: "NODE_ENV=staging | test_ui_mobile"
    type: "BUILD"
    working_directory: "/buddy/leflair-auto-test"
    docker_image_name: "library/node"
    docker_image_tag: "latest"
    execute_commands:
    - "# yarn install"
    - "npm install"
    - "NODE_ENV=staging SELENIUM_REMOTE_URL=http://selenium-ch:4444/wd/hub SELENIUM_BROWSER=chrome npm run test_ui_mobile -- --ci --reporters=default --reporters=jest-junit"
    services:
    - type: "SELENIUM_CHROME"
      version: "latest"
      persistent: false
      connection:
        host: "selenium-ch"
        port: 4444
      plugins: []
      accounts: []
    mount_filesystem_path: "/buddy/leflair-auto-test"
    shell: "BASH"
    trigger_condition: "ALWAYS"
  - action: "Send notification to Telegram"
    type: "TELEGRAM"
    trigger_time: "ON_FAILURE"
    content: "[#$BUDDY_EXECUTION_ID] $BUDDY_PIPELINE_NAME failed execution by [$BUDDY_INVOKER_NAME]($BUDDY_INVOKER_URL)"
    parse_mode: "MARKDOWN"
    trigger_condition: "ALWAYS"
    integration_id: 40663
- pipeline: "E2E API Test on Production (Daily)"
  trigger_mode: "MANUAL"
  ref_name: "master"
  folder: "E2E Test on Production (Daily)"
  ref_type: "BRANCH"
  target_site_url: "https://www.leflair.vn"
  actions:
  - action: "Check https://www.staging.leflair.io/api/v2/home status"
    type: "WEB"
    headers:
    - name: "Content-Type"
      value: "application/json"
    - name: "User-Agent"
      value: "Buddy"
    text: "featured"
    text_existence: true
    destination: "https://www.staging.leflair.io/api/v2/home"
    trigger_condition: "ALWAYS"
  - action: "NODE_ENV=production | test_api"
    type: "BUILD"
    working_directory: "/buddy/leflair-auto-test"
    docker_image_name: "library/node"
    docker_image_tag: "latest"
    execute_commands:
    - "# yarn install"
    - "npm install"
    - "NODE_ENV=production npm run test_api -- --ci --reporters=default --reporters=jest-junit"
    mount_filesystem_path: "/buddy/leflair-auto-test"
    shell: "BASH"
    trigger_condition: "ALWAYS"
  - action: "Send notification to Telegram"
    type: "TELEGRAM"
    trigger_time: "ON_FAILURE"
    content: "[#$BUDDY_EXECUTION_ID] $BUDDY_PIPELINE_NAME failed execution by [$BUDDY_INVOKER_NAME]($BUDDY_INVOKER_URL)"
    parse_mode: "MARKDOWN"
    trigger_condition: "ALWAYS"
    integration_id: 40663
- pipeline: "E2E Chrome Test on Production (Daily)"
  trigger_mode: "MANUAL"
  ref_name: "master"
  folder: "E2E Test on Production (Daily)"
  ref_type: "BRANCH"
  target_site_url: "https://www.leflair.vn"
  actions:
  - action: "Check https://www.leflair.vn status"
    type: "WEB"
    headers:
    - name: "User-Agent"
      value: "Buddy"
    - name: "Content-Type"
      value: "application/json"
    text: "leflair"
    text_existence: true
    destination: "https://www.leflair.vn"
    trigger_condition: "ALWAYS"
  - action: "NODE_ENV=production | test_ui_chrome"
    type: "BUILD"
    working_directory: "/buddy/leflair-auto-test"
    docker_image_name: "library/node"
    docker_image_tag: "latest"
    execute_commands:
    - "# yarn install"
    - "npm install"
    - "NODE_ENV=production SELENIUM_REMOTE_URL=http://selenium-ch:4444/wd/hub npm run test_ui_chrome -- --ci --reporters=default --reporters=jest-junit"
    services:
    - type: "SELENIUM_CHROME"
      version: "latest"
      persistent: false
      connection:
        host: "selenium-ch"
        port: 4444
      plugins: []
      accounts: []
    mount_filesystem_path: "/buddy/leflair-auto-test"
    shell: "BASH"
    trigger_condition: "ALWAYS"
  - action: "Send notification to Telegram"
    type: "TELEGRAM"
    trigger_time: "ON_FAILURE"
    content: "[#$BUDDY_EXECUTION_ID] $BUDDY_PIPELINE_NAME failed execution by [$BUDDY_INVOKER_NAME]($BUDDY_INVOKER_URL)"
    parse_mode: "MARKDOWN"
    trigger_condition: "ALWAYS"
    integration_id: 40663
- pipeline: "E2E Firefox Test on Production (Daily)"
  trigger_mode: "MANUAL"
  ref_name: "master"
  folder: "E2E Test on Production (Daily)"
  ref_type: "BRANCH"
  target_site_url: "https://www.leflair.vn"
  actions:
  - action: "Check https://www.leflair.vn status"
    type: "WEB"
    headers:
    - name: "User-Agent"
      value: "Buddy"
    - name: "Content-Type"
      value: "application/json"
    text: "leflair"
    text_existence: true
    destination: "https://www.leflair.vn"
    trigger_condition: "ALWAYS"
  - action: "NODE_ENV=production | test_ui_firefox"
    type: "BUILD"
    working_directory: "/buddy/leflair-auto-test"
    docker_image_name: "library/node"
    docker_image_tag: "latest"
    execute_commands:
    - "# yarn install"
    - "npm install"
    - "NODE_ENV=production SELENIUM_REMOTE_URL=http://selenium-ff:4444/wd/hub npm run test_ui_firefox -- --ci --reporters=default --reporters=jest-junit"
    services:
    - type: "SELENIUM_FIREFOX"
      version: "latest"
      persistent: false
      connection:
        host: "selenium-ff"
        port: 4444
      plugins: []
      accounts: []
    mount_filesystem_path: "/buddy/leflair-auto-test"
    shell: "BASH"
    trigger_condition: "ALWAYS"
  - action: "Send notification to Telegram"
    type: "TELEGRAM"
    trigger_time: "ON_FAILURE"
    content: "[#$BUDDY_EXECUTION_ID] $BUDDY_PIPELINE_NAME failed execution by [$BUDDY_INVOKER_NAME]($BUDDY_INVOKER_URL)"
    parse_mode: "MARKDOWN"
    trigger_condition: "ALWAYS"
    integration_id: 40663
- pipeline: "E2E Mobile Test on Production (Daily)"
  trigger_mode: "MANUAL"
  ref_name: "master"
  folder: "E2E Test on Production (Daily)"
  ref_type: "BRANCH"
  target_site_url: "https://www.leflair.vn"
  actions:
  - action: "Check https://www.leflair.vn status"
    type: "WEB"
    headers:
    - name: "Content-Type"
      value: "application/json"
    - name: "User-Agent"
      value: "Buddy"
    text: "leflair"
    text_existence: true
    destination: "https://www.leflair.vn"
    trigger_condition: "ALWAYS"
  - action: "NODE_ENV=production | test_ui_mobile"
    type: "BUILD"
    working_directory: "/buddy/leflair-auto-test"
    docker_image_name: "library/node"
    docker_image_tag: "latest"
    execute_commands:
    - "# yarn install"
    - "npm install"
    - "NODE_ENV=production SELENIUM_REMOTE_URL=http://selenium-ch:4444/wd/hub SELENIUM_BROWSER=chrome npm run test_ui_mobile -- --ci --reporters=default --reporters=jest-junit"
    services:
    - type: "SELENIUM_CHROME"
      version: "latest"
      persistent: false
      connection:
        host: "selenium-ch"
        port: 4444
      plugins: []
      accounts: []
    mount_filesystem_path: "/buddy/leflair-auto-test"
    shell: "BASH"
    trigger_condition: "ALWAYS"
  - action: "Send notification to Telegram"
    type: "TELEGRAM"
    trigger_time: "ON_FAILURE"
    content: "[#$BUDDY_EXECUTION_ID] $BUDDY_PIPELINE_NAME failed execution by [$BUDDY_INVOKER_NAME]($BUDDY_INVOKER_URL)"
    parse_mode: "MARKDOWN"
    trigger_condition: "ALWAYS"
    integration_id: 40663
